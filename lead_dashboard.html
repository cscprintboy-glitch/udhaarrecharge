<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Recharge & Emergency Support</title>

<style>
body{
    font-family: Arial, sans-serif;
    background: linear-gradient(135deg,#e8f5e9,#ffffff);
    padding:15px;
}

/* Header */
.header{
    text-align:center;
    margin-bottom:15px;
}
.header h2{
    margin:0;
    color:#1e8449;
}
.header p{
    margin:5px 0 0;
    color:#555;
    font-size:14px;
}

/* Card */
.card{
    background:#fff;
    max-width:420px;
    margin:auto;
    padding:20px;
    border-radius:14px;
    box-shadow:0 8px 20px rgba(0,0,0,0.1);
}

/* Titles */
h3{
    text-align:center;
    color:#2e7d32;
    margin-bottom:10px;
}

/* Notice */
.notice{
    background:#fff3cd;
    border-left:5px solid #ff9800;
    padding:10px;
    font-size:13px;
    color:#6b4e00;
    border-radius:8px;
    margin-bottom:12px;
}

/* WhatsApp */
.whatsapp{
    display:flex;
    align-items:center;
    justify-content:center;
    gap:8px;
    background:#25D366;
    color:#fff;
    padding:12px;
    border-radius:10px;
    text-decoration:none;
    font-weight:bold;
    margin-bottom:15px;
}
.whatsapp:hover{opacity:0.9;}

/* Inputs */
input, select, button{
    width:100%;
    padding:12px;
    margin-top:10px;
    font-size:15px;
    border-radius:8px;
    border:1px solid #ccc;
}
input:focus, select:focus{
    outline:none;
    border-color:#28a745;
}

/* Button */
button{
    background: linear-gradient(135deg,#28a745,#1e8449);
    color:#fff;
    border:none;
    font-weight:bold;
    cursor:pointer;
}
button:hover{ opacity:0.9; }

/* Section */
.section{
    margin-top:20px;
    border-top:1px dashed #ccc;
    padding-top:15px;
}

/* Admin */
#adminLogin, #adminPanel{ display:none; }

table{
    width:100%;
    border-collapse: collapse;
    margin-top:15px;
    font-size:13px;
}
th, td{
    border:1px solid #ccc;
    padding:6px;
    text-align:center;
}
th{
    background:#28a745;
    color:#fff;
}
.active{ background:#e8f5e9; }
.expired{ background:#fdecea; }
.paid{ background:#e3f2fd; }
</style>
</head>

<body>

<div class="header">
    <h2>St Cottex Pvt Ltd Ludhiana</h2>
    <p>Trusted Recharge & Emergency Support</p>
</div>

<!-- ================= CUSTOMER FORM ================= -->
<div class="card" id="customerForm">

<div class="notice">
üîí <b>Important:</b> Sampark kare bina <b>koi bhi Emergency Fund valid nahi</b> mana jayega.
</div>

<a class="whatsapp" href="https://wa.me/918264426101" target="_blank">
üìû WhatsApp Sampark Kare ‚Äì 8264426101
</a>

<h3>üì± Recharge Request</h3>

<input type="text" id="name" placeholder="Your Name" required>
<input type="tel" id="phone" placeholder="Mobile Number" required>

<select id="sim" required>
    <option value="">Select SIM</option>
    <option>Airtel</option>
    <option>Jio</option>
    <option>Vi</option>
    <option>BSNL</option>
</select>

<input type="number" id="recharge" placeholder="Recharge Amount" required>
<input type="number" id="pay" placeholder="Total Pay (+‚Çπ25 Service)" readonly>

<div class="section">
<h3>üö® Emergency Fund (1 Month)</h3>
<select id="fund" required>
    <option value="">Select Amount</option>
    <option value="500">‚Çπ500 ‚Üí Pay ‚Çπ600</option>
    <option value="1000">‚Çπ1000 ‚Üí Pay ‚Çπ1150</option>
    <option value="2000">‚Çπ2000 ‚Üí Pay ‚Çπ2300</option>
</select>
</div>

<button onclick="submitLead()">Submit Request</button>
</div>

<!-- ================= ADMIN LOGIN ================= -->
<div class="card" id="adminLogin">
<h3>üîê Admin Login</h3>
<input type="password" id="adminPass" placeholder="Enter Password">
<button onclick="adminLogin()">Login</button>
</div>

<!-- ================= ADMIN PANEL ================= -->
<div class="card" id="adminPanel">
<h3>üìä Admin Dashboard</h3>
<div id="dashboard"></div>
</div>

<script>
const PASSWORD = "Manoj@143";

// Recharge calc
document.getElementById("recharge").addEventListener("input",()=>{
    document.getElementById("pay").value =
    Number(document.getElementById("recharge").value || 0) + 25;
});

// Admin route
if(window.location.hash === "#admin"){
    document.getElementById("customerForm").style.display="none";
    document.getElementById("adminLogin").style.display="block";
}

// Admin login
function adminLogin(){
    if(document.getElementById("adminPass").value === PASSWORD){
        document.getElementById("adminLogin").style.display="none";
        document.getElementById("adminPanel").style.display="block";
        loadDashboard();
    }else{
        alert("Wrong Password");
    }
}

// Submit lead
function submitLead(){
    const name = document.getElementById("name").value;
    const phone = document.getElementById("phone").value;
    const sim = document.getElementById("sim").value;
    const recharge = document.getElementById("recharge").value;
    const pay = document.getElementById("pay").value;
    const fund = document.getElementById("fund").value;

    if(!name || !phone || !sim || !recharge || !fund){
        alert("Please fill all details");
        return;
    }

    let leads = JSON.parse(localStorage.getItem("leads")||"{}");
    if(leads[phone] && leads[phone].status!=="Paid"){
        alert("Customer already has active fund");
        return;
    }

    let d = new Date(); d.setMonth(d.getMonth()+1);
    leads[phone] = {
        name, phone, sim, recharge, pay,
        fund, due:d.toLocaleDateString(), status:"Active"
    };
    localStorage.setItem("leads",JSON.stringify(leads));

    alert("Request Submitted. Please WhatsApp us for confirmation.");
    document.getElementById("customerForm").reset?.();
}

// Load dashboard
function loadDashboard(){
    let leads = JSON.parse(localStorage.getItem("leads")||"{}");
    let html="<table><tr><th>Name</th><th>Phone</th><th>Fund</th><th>Due</th><th>Status</th><th>Action</th></tr>";
    for(let p in leads){
        let l=leads[p];
        let cls=l.status==="Paid"?"paid":(new Date(l.due)<new Date()?"expired":"active");
        html+=`<tr class="${cls}">
        <td>${l.name}</td><td>${p}</td><td>‚Çπ${l.fund}</td>
        <td>${l.due}</td><td>${l.status}</td>
        <td><button onclick="markPaid('${p}')">Paid</button></td></tr>`;
    }
    html+="</table>";
    document.getElementById("dashboard").innerHTML=html;
}
function markPaid(p){
    let leads=JSON.parse(localStorage.getItem("leads"));
    leads[p].status="Paid";
    localStorage.setItem("leads",JSON.stringify(leads));
    loadDashboard();
}
</script>

</body>
</html>
